<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>How to install from sources on Linux &mdash; GetFEM++</title>
    
    <link rel="stylesheet" href="../_static/getfem.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '5.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="author" title="このドキュメントについて" href="../about.html" />
    <link rel="copyright" title="著作権" href="../copyright.html" />
    <link rel="top" title="GetFEM++" href="../index.html" />
    <link rel="next" title="How to install from sources on MacOS X" href="install_mac.html" />
    <link rel="prev" title="gf_workspace" href="../scilab/cmdref_gf_workspace.html" />
    <link rel="shortcut icon" type="image/png" href="../_static/icon.png" />
 

  </head>
  <body>
    <div class="related">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総合索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="install_mac.html" title="How to install from sources on MacOS X"
             accesskey="N">次へ</a> |</li>
        <li class="right" >
          <a href="../scilab/cmdref_gf_workspace.html" title="gf_workspace"
             accesskey="P">前へ</a> |</li>
        <li><a href="https://savannah.nongnu.org/projects/getfem" <img src="../_static/icon.png" alt=""
                 style="vertical-align: middle; margin-top: -1px"/></li></a>
        <li><a href="../index.html">GetFEM++</a> &raquo;</li>
 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="how-to-install-from-sources-on-linux">
<span id="ud-install-linux"></span><h1>How to install from sources on Linux<a class="headerlink" href="#how-to-install-from-sources-on-linux" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p>See <a class="reference external" href="../download.html">download and install</a> page for general requirements and the download of the last stable version of <em>GetFEM++</em>.</p>
<div class="section" id="download-sources">
<h2>Download sources<a class="headerlink" href="#download-sources" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>There are two ways to get <em>GetFEM++</em>, either as a compressed package for the stable
release (file getfem-5.3.tar.gz downloadable on the page <a class="reference external" href="../download.html">download and install</a>)  or via anonymous git access (current unstable version under development).</p>
<p>You can get the last stable version directly with</p>
<blockquote>
<div><ul>
<li><p class="first">download package:</p>
<blockquote>
<div><p>$ wget <a class="reference external" href="http://download-mirror.savannah.gnu.org/releases/getfem/stable/getfem">http://download-mirror.savannah.gnu.org/releases/getfem/stable/getfem</a>-5.3.tar.gz</p>
</div></blockquote>
</li>
<li><p class="first">unpack:</p>
<blockquote>
<div><p>$ tar xzf getfem-5.3.tar.gz</p>
</div></blockquote>
</li>
<li><p class="first">and go to the root directory of <em>GetFEM++</em>:</p>
<blockquote>
<div><p>$ cd getfem-5.3/</p>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<p>The current git version is:</p>
<ul>
<li><p class="first">checkout over GIT protocol:</p>
<div class="highlight-c++"><pre>$ git clone https://git.savannah.nongnu.org/git/getfem.git</pre>
</div>
</li>
<li><p class="first">go to the root directory of <em>GetFEM++</em>:</p>
<div class="highlight-c++"><pre>$ cd getfem</pre>
</div>
</li>
<li><p class="first">and run <tt class="docutils literal"><span class="pre">autogen.sh</span></tt> script (you need m4, automake and libtool)</p>
<div class="highlight-c++"><pre>$ bash autogen.sh</pre>
</div>
</li>
</ul>
</div>
<div class="section" id="compiling">
<h2>Compiling<a class="headerlink" href="#compiling" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Configure with:</p>
<div class="highlight-c++"><pre>$ ./configure</pre>
</div>
<p>then start the compilation with:</p>
<div class="highlight-c++"><pre>$ make</pre>
</div>
<p>and finally install with:</p>
<div class="highlight-c++"><pre>$ make install</pre>
</div>
<p>You can find some additional help on how to build the Matlab interface on Ubuntu on the page of <a class="reference external" href="http://windhoff.net/wiki/how_to/build_getfem_matlab_toolbox_on_ubuntu_linux">Mirko Windhoff</a>.</p>
<div class="section" id="configure-options">
<h3>Configure Options<a class="headerlink" href="#configure-options" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first">If you want to use a different compiler than the one chosen
automatically by the <tt class="docutils literal"><span class="pre">./configure</span></tt> script, just specify its
name on the command line:</p>
<div class="highlight-c++"><pre>$ ./configure CXX=mycompiler</pre>
</div>
</li>
<li><p class="first">If you want to build one of the interfaces, use:</p>
<div class="highlight-c++"><pre>$ ./configure ``--enable-python``
$ ./configure ``--enable-scilab``
$ ./configure ``--enable-matlab``</pre>
</div>
<p>depending on the interface you want to build. Note that the python interface
is build by default.</p>
</li>
<li><p class="first">If you want to use a specific <strong>BLAS</strong> library, you may have to
supply the necessary link flags and libs to the configure script
with:</p>
<div class="highlight-c++"><pre>$ ./configure BLAS_LIBS=&quot;-L/path/to/lib -lfoo -lbar ....etc&quot;</pre>
</div>
<p>for example:</p>
<div class="highlight-c++"><pre>$ ./configure BLAS_LIBS=&quot;-L/usr/lib/sse2/atlas -lblas&quot;</pre>
</div>
</li>
<li><p class="first">If you want to set the prefix directory where to install the library
you can use the <tt class="docutils literal"><span class="pre">--prefix</span></tt> option (the default prefix directory is
<tt class="docutils literal"><span class="pre">/usr/local</span></tt>):</p>
<div class="highlight-c++"><pre>$ ./configure --prefix=my_dest_dir</pre>
</div>
</li>
<li><p class="first">By default, the python interface is built and for python 2 version. You can disable the built of the python interface with:</p>
<div class="highlight-c++"><pre>$ ./configure --disable-python</pre>
</div>
<p>or either build the interface for python 3 version with</p>
<blockquote>
<div><p>$ ./configure &#8211;enable-python3</p>
</div></blockquote>
</li>
</ul>
<p>Note that there are other options to the configure script. A
<tt class="docutils literal"><span class="pre">./configure</span> <span class="pre">--help</span></tt> will list them.</p>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<ul class="last simple">
<li>On linux/x86_64 platforms, a mandatory option when building <em>GetFEM++</em>
(and any static library linked to them) is the <tt class="docutils literal"><span class="pre">--with-pic</span></tt>
option of their <tt class="docutils literal"><span class="pre">./configure</span></tt> script.</li>
</ul>
</div>
</div>
<div class="section" id="scilab-interface">
<h3>Scilab interface<a class="headerlink" href="#scilab-interface" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>The installation of the <em>SciLab</em> <em>GetFEM++</em> toolbox can be somewhat tricky, since it combines a C++ compiler, libraries and <em>SciLab</em> interaction. In case of troubles with a
non-GNU compiler, gcc/g++ (&gt;= 4.8) should be a safe solution.</p>
<div class="admonition caution">
<p class="first admonition-title">ご用心</p>
<ul class="last simple">
<li>The minimal <em>SciLab</em> release is the 5.2.2.</li>
<li>you should have built the <em>GetFEM++</em> static library (i.e. do not use <tt class="docutils literal"><span class="pre">./configure</span>
<span class="pre">--disable-static</span></tt> when building <em>GetFEM++</em>). On linux/x86_64 platforms, a
mandatory option when building <em>GetFEM++</em> and <em>getfem-interface</em> toolbox (and any static library linked
to them) is the <tt class="docutils literal"><span class="pre">--with-pic</span></tt> option of their <tt class="docutils literal"><span class="pre">./configure</span></tt> script.</li>
<li>you should have use the <tt class="docutils literal"><span class="pre">--enable-scilab</span></tt> option to configure the <em>GetFEM++</em> sources (i.e. <tt class="docutils literal"><span class="pre">./configure</span> <span class="pre">--enable-scilab</span></tt> ...)</li>
</ul>
</div>
<p>You may also use <tt class="docutils literal"><span class="pre">--with-scilab-toolbox-dir=toolbox_dir</span></tt> to change the default toolbox installation directory (<tt class="docutils literal"><span class="pre">gfdest_dir/getfem_toolbox</span></tt>). Use <tt class="docutils literal"><span class="pre">./configure</span> <span class="pre">--help</span></tt> for more options.</p>
<p>With this, since the Scilab interface is contained into the <em>GetFEM++</em> sources (in the directory interface/src) you can compile both the <em>GetFEM++</em> library and the Scilab interface by</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="n">make</span>
</pre></div>
</div>
<p>Optionally, you can install it with</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="n">make</span> <span class="n">install</span>
</pre></div>
</div>
<p>If you want to use a different compiler than the one chosen automatically by the <tt class="docutils literal"><span class="pre">./configure</span></tt> script, just specify its name on the command line: <tt class="docutils literal"><span class="pre">./configure</span> <span class="pre">CXX=mycompiler</span></tt>.</p>
<p>Once getfem is compiled:</p>
<blockquote>
<div><ul class="simple">
<li>Go to the scilab getfem++ interface install directory (interface/src/scilab if the installation is not done)</li>
<li>launch scilab</li>
<li>load the getfem++ toolbox with:
<tt class="docutils literal"><span class="pre">exec</span> <span class="pre">loader.sce;</span></tt></li>
<li>You can try to launch a demo with:
<tt class="docutils literal"><span class="pre">cd</span> <span class="pre">demos;</span></tt>
<tt class="docutils literal"><span class="pre">exec</span> <span class="pre">demo_static_contact.sce;</span></tt></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="matlab-interface">
<h3>Matlab interface<a class="headerlink" href="#matlab-interface" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>The installation of the <em>getfem-interface</em> toolbox can be somewhat tricky, since it combines a
C++ compiler, libraries and <em>MatLab</em> interaction... In case of troubles with a
non-GNU compiler, gcc/g++ (&gt;= 4.8) should be a safe solution.</p>
<div class="admonition caution">
<p class="first admonition-title">ご用心</p>
<ul class="last simple">
<li>you should have built the <em>GetFEM++</em> static library (i.e. do not use <tt class="docutils literal"><span class="pre">./configure</span>
<span class="pre">--disable-static</span></tt> when building <em>GetFEM++</em>). On linux/x86_64 platforms, a
mandatory option when building <em>GetFEM++</em> and <em>getfem-interface</em> (and any static library linked
to them) is the <tt class="docutils literal"><span class="pre">--with-pic</span></tt> option of their <tt class="docutils literal"><span class="pre">./configure</span></tt> script.</li>
<li>you should have use the &#8211;enable-matlab option to configure the <em>GetFEM++</em> sources (i.e. ./configure &#8211;enable-matlab ...)</li>
</ul>
</div>
<p>You may also use <tt class="docutils literal"><span class="pre">--with-matlab-toolbox-dir=toolbox_dir</span></tt> to change the default toolbox installation directory (<tt class="docutils literal"><span class="pre">gfdest_dir/getfem_toolbox</span></tt>). Use <tt class="docutils literal"><span class="pre">./configure</span> <span class="pre">--help</span></tt> for more options.</p>
<p>With this, since the Matlab interface is contained into the <em>GetFEM++</em> sources (in the directory interface/src) you can compile both the <em>GetFEM++</em> library and the Matlab interface by</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="n">make</span>
</pre></div>
</div>
<p>An optional step is <tt class="docutils literal"><span class="pre">make</span> <span class="pre">check</span></tt> in order to check the matlab interface (this
sets some environment variables and runs the <tt class="docutils literal"><span class="pre">check_all.m</span></tt> script which is the <tt class="docutils literal"><span class="pre">tests/matlab</span></tt> directory of the distribution) and install it (the libraries
will be copied in <tt class="docutils literal"><span class="pre">gfdest_dir/lib</span></tt>, while the MEX-File and M-Files will be
copied in <tt class="docutils literal"><span class="pre">toolbox_dir</span></tt>):</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="n">make</span> <span class="n">install</span>
</pre></div>
</div>
<p>If you want to use a different compiler than the one chosen automatically by the <tt class="docutils literal"><span class="pre">./configure</span></tt> script, just specify its name on the command line: <tt class="docutils literal"><span class="pre">./configure</span> <span class="pre">CXX=mycompiler</span></tt>.</p>
<p>When the library is installed, you may have to set the <tt class="docutils literal"><span class="pre">LD_LIBRARY_PATH</span></tt>
environment variable to the directory containing the <tt class="docutils literal"><span class="pre">libgetfem.so</span></tt> and
<tt class="docutils literal"><span class="pre">libgetfemint.so</span></tt>, which is <tt class="docutils literal"><span class="pre">gfdest_dir/lib</span></tt>:</p>
<div class="highlight-c++"><pre>export LD_LIBRARY_PATH=gfdest_dir/lib # if you use bash</pre>
</div>
<p>The last step is to add the path to the toolbox in the matlab path:</p>
<ul class="simple">
<li>you can set the environment variable <tt class="docutils literal"><span class="pre">MATLABPATH</span></tt> to <tt class="docutils literal"><span class="pre">toolbox_dir</span></tt>
(<tt class="docutils literal"><span class="pre">export</span> <span class="pre">MATLABPATH=toolbox_dir</span></tt> for example).</li>
<li>you can put <tt class="docutils literal"><span class="pre">addpath('toolbox_dir')</span></tt> to your <tt class="docutils literal"><span class="pre">$HOME/matlab/startup.m</span></tt></li>
</ul>
<p>A very classical problem at this step is the incompatibility of the C and C++ libraries used by Matlab. Matlab is distributed with its own libc and libstdc++ libraries. An error message of the following type occurs when one tries to use a command of the interface:</p>
<div class="highlight-c++"><pre>/usr/local/matlab14-SP3/bin/glnxa64/../../sys/os/??/libgcc_s.so.1:
version `GCC_?.?&#x27; not found (required by .../gf_matlab.mex??).</pre>
</div>
<p>In order to fix this problem one has to enforce Matlab to load the C and C++ libraries of the system. There is two possibilities to do this. The most radical is to delete the C and C++ libraries distributed along with Matlab (if you have administrator privileges ...!) for instance with:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="n">mv</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">matlab14</span><span class="o">-</span><span class="n">SP3</span><span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">os</span><span class="o">/??/</span><span class="n">libgcc_s</span><span class="p">.</span><span class="n">so</span><span class="mf">.1</span> <span class="n">libgcc_s</span><span class="p">.</span><span class="n">so</span><span class="mf">.1</span><span class="n">_old</span>
<span class="n">mv</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">matlab14</span><span class="o">-</span><span class="n">SP3</span><span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">os</span><span class="o">/??/</span><span class="n">libstdc</span><span class="o">++</span><span class="n">_s</span><span class="p">.</span><span class="n">so</span><span class="mf">.6</span> <span class="n">libstdc</span><span class="o">++</span><span class="n">_s</span><span class="p">.</span><span class="n">so</span><span class="mf">.6</span><span class="n">_old</span>
<span class="n">mv</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">matlab14</span><span class="o">-</span><span class="n">SP3</span><span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">os</span><span class="o">/??/</span><span class="n">libgfortran</span><span class="p">.</span><span class="n">so</span><span class="mf">.3</span> <span class="n">libgfortran</span><span class="p">.</span><span class="n">so</span><span class="mf">.3</span><span class="n">_old</span>
</pre></div>
</div>
<p>The second possibility is to set the variable LDPRELOAD before launching Matlab for instance with (depending on the system):</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="n">LD_PRELOAD</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">libgcc_s</span><span class="p">.</span><span class="n">so</span><span class="o">:/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">libstdc</span><span class="o">++</span><span class="p">.</span><span class="n">so</span><span class="mf">.6</span> <span class="n">matlab</span>
</pre></div>
</div>
<p>More specific instructions can be found in the <tt class="docutils literal"><span class="pre">README*</span></tt> files of the
distribution.</p>
<p>A few precompiled versions of the Matlab interface are available on the <a class="reference external" href="../download.html">download and install</a> page of <em>GetFEM++</em>.</p>
<p>A second problem arising with recent distribution of Matlab (2016a), is the incompatibility of some libraries with ILP64 version of MKL loaded by MATLAB which uses 64 bits integers instead of 32 bits ones contrarily to most system blas/lapack libraries. New releases of <em>GetFEM++</em> are compatible with both 64 bits and 32 bits integer blas/lapack libraries. However, for instance, Mumps should be recompiled in a 64 bit integer version to be compatible with MKL ILP64. Mumps version on the system is the 32 bits integer version. If problem of this kind are encountered, you can try to force Matlab to load 32 bit blas and lapack libraries with:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="n">LD_PRELOAD</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">libblas</span><span class="p">.</span><span class="n">so</span><span class="o">:/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">liblapack</span><span class="p">.</span><span class="n">so</span> <span class="n">matlab</span>
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <p class="logo"><a href="../index.html">
    <img class="logo" src="../_static/logo_getfem_small.png" alt="Logo"/>
  </a></p>
  <h3><a href="../contents.html">目次</a></h3>
  <ul>
<li><a class="reference internal" href="#">How to install from sources on Linux</a><ul>
<li><a class="reference internal" href="#download-sources">Download sources</a></li>
<li><a class="reference internal" href="#compiling">Compiling</a><ul>
<li><a class="reference internal" href="#configure-options">Configure Options</a></li>
<li><a class="reference internal" href="#scilab-interface">Scilab interface</a></li>
<li><a class="reference internal" href="#matlab-interface">Matlab interface</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>前のトピックへ</h4>
  <p class="topless"><a href="../scilab/cmdref_gf_workspace.html"
                        title="前の章へ">gf_workspace</a></p>
  <h4>次のトピックへ</h4>
  <p class="topless"><a href="install_mac.html"
                        title="次の章へ">How to install from sources on MacOS X</a></p>            <h3>Download</h3>
            <p><a href="../download.html">Download GetFEM++ </a></p>
	    <h3>Main documentations</h3>
	    <ul>
              
	      <li><a href="../userdoc/index.html">GetFEM++ User documentation</a></li>
              <li><a href="../python/index.html">Python Interface</a></li>
	      <li><a href="../matlab/index.html">Matlab Interface</a></li>
	      <li><a href="../scilab/index.html">Scilab Interface</a></li>
	      <li><a href="../gmm/index.html"> Gmm++</a></li>
	      <li><a href="../project/index.html"> GetFEM++ project</a></li>
            </ul>

            <h3>Other resources</h3>
            <ul>
              <li><a href="../screenshots/shots.html">Screenshots</a></li>
              <li><a href="../links.html">Related links</a></li>
	      <li><a href="https://savannah.nongnu.org/projects/getfem">Hosted by Savannah </a></li>
              
              
            </ul>
<div id="searchbox" style="display: none">
  <h3>クイック検索</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="検索" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    モジュール、クラス、または関数名を入力してください
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総合索引"
             >索引</a></li>
        <li class="right" >
          <a href="install_mac.html" title="How to install from sources on MacOS X"
             >次へ</a> |</li>
        <li class="right" >
          <a href="../scilab/cmdref_gf_workspace.html" title="gf_workspace"
             >前へ</a> |</li>
        <li><a href="https://savannah.nongnu.org/projects/getfem" <img src="../_static/icon.png" alt=""
                 style="vertical-align: middle; margin-top: -1px"/></li></a>
        <li><a href="../index.html">GetFEM++</a> &raquo;</li>
 
      </ul>
    </div>
    <div class="footer">
      &copy; <a href="../copyright.html">Copyright</a> 2004-2018 GetFEM++ project.
    </div>
  </body>
</html>